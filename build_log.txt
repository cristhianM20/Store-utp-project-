#1 [internal] load local bake definitions
#1 reading from stdin 1.67kB done
#1 DONE 0.0s

#2 [ai-service internal] load build definition from Dockerfile
#2 transferring dockerfile: 403B done
#2 DONE 0.0s

#3 [frontend internal] load build definition from Dockerfile
#3 transferring dockerfile: 1.50kB done
#3 DONE 0.1s

#4 [backend internal] load build definition from Dockerfile
#4 transferring dockerfile: 395B done
#4 DONE 0.0s

#5 [frontend internal] load metadata for docker.io/library/node:22-alpine
#5 ...

#6 [ai-service internal] load metadata for docker.io/library/python:3.11-slim
#6 DONE 0.2s

#7 [ai-service internal] load .dockerignore
#7 transferring context: 2B done
#7 DONE 0.0s

#8 [ai-service 1/6] FROM docker.io/library/python:3.11-slim@sha256:193fdd0bbcb3d2ae612bd6cc3548d2f7c78d65b549fcaa8af75624c47474444d
#8 DONE 0.0s

#9 [backend internal] load metadata for docker.io/library/eclipse-temurin:21-jre-alpine
#9 DONE 0.2s

#10 [ai-service internal] load build context
#10 transferring context: 272B done
#10 DONE 0.1s

#11 [backend internal] load metadata for docker.io/library/maven:3.9.9-eclipse-temurin-21-alpine
#11 DONE 0.4s

#5 [frontend internal] load metadata for docker.io/library/node:22-alpine
#5 DONE 0.3s

#12 [ai-service 2/6] WORKDIR /app
#12 CACHED

#13 [ai-service 3/6] COPY requirements.txt .
#13 CACHED

#14 [frontend internal] load .dockerignore
#14 transferring context: 155B done
#14 DONE 0.1s

#15 [frontend internal] load build context
#15 DONE 0.0s

#16 [frontend base 1/1] FROM docker.io/library/node:22-alpine@sha256:b2358485e3e33bc3a33114d2b1bdb18cdbe4df01bd2b257198eb51beb1f026c5
#16 DONE 0.0s

#17 [backend internal] load .dockerignore
#17 transferring context: 2B done
#17 DONE 0.1s

#18 [ai-service 4/6] RUN apt-get update && apt-get install -y libgl1-mesa-glx libglib2.0-0 && rm -rf /var/lib/apt/lists/*
#18 ...

#19 [backend build 1/6] FROM docker.io/library/maven:3.9.9-eclipse-temurin-21-alpine@sha256:5a8b906c4faa11d33f6c74758f67db8eac25441e14b0729f6d50ff78992be58a
#19 DONE 0.0s

#20 [backend stage-1 1/3] FROM docker.io/library/eclipse-temurin:21-jre-alpine@sha256:326837fba06a8ff5482a17bafbd65319e64a6e997febb7c85ebe7e3f73c12b11
#20 DONE 0.0s

#15 [frontend internal] load build context
#15 transferring context: 4.03kB done
#15 DONE 0.1s

#21 [frontend deps 1/3] WORKDIR /app
#21 CACHED

#22 [frontend builder 2/4] COPY --from=deps /app/node_modules ./node_modules
#22 CACHED

#23 [frontend deps 2/3] COPY package.json package-lock.json* ./
#23 CACHED

#24 [frontend deps 3/3] RUN npm ci
#24 CACHED

#25 [frontend builder 3/4] COPY . .
#25 CACHED

#26 [backend internal] load build context
#26 transferring context: 4.65kB done
#26 DONE 0.2s

#27 [backend build 4/6] RUN mvn dependency:go-offline
#27 CACHED

#28 [backend build 2/6] WORKDIR /app
#28 CACHED

#29 [backend stage-1 2/3] WORKDIR /app
#29 CACHED

#30 [backend build 6/6] RUN mvn package -DskipTests
#30 CACHED

#31 [backend build 3/6] COPY pom.xml .
#31 CACHED

#32 [backend build 5/6] COPY src ./src
#32 CACHED

#33 [backend stage-1 3/3] COPY --from=build /app/target/*.jar app.jar
#33 CACHED

#34 [frontend builder 4/4] RUN npm run build
#34 ...

#35 [backend] exporting to image
#35 exporting layers done
#35 writing image sha256:c18e12a4cb532f526f6457ca8a8dcbac81f7b3247a41508b53ed0d6c0f5648b9 0.0s done
#35 naming to docker.io/library/ecommerceai-pro-backend done
#35 DONE 0.1s

#18 [ai-service 4/6] RUN apt-get update && apt-get install -y libgl1-mesa-glx libglib2.0-0 && rm -rf /var/lib/apt/lists/*
#18 0.759 Hit:1 http://deb.debian.org/debian trixie InRelease
#18 0.759 Get:2 http://deb.debian.org/debian trixie-updates InRelease [47.3 kB]
#18 0.761 Get:3 http://deb.debian.org/debian-security trixie-security InRelease [43.4 kB]
#18 0.857 Get:4 http://deb.debian.org/debian trixie/main amd64 Packages [9670 kB]
#18 ...

#36 [backend] resolving provenance for metadata file
#36 DONE 0.0s

#18 [ai-service 4/6] RUN apt-get update && apt-get install -y libgl1-mesa-glx libglib2.0-0 && rm -rf /var/lib/apt/lists/*
#18 1.795 Get:5 http://deb.debian.org/debian trixie-updates/main amd64 Packages [5412 B]
#18 1.796 Get:6 http://deb.debian.org/debian-security trixie-security/main amd64 Packages [80.7 kB]
#18 2.470 Fetched 9847 kB in 2s (5325 kB/s)
#18 2.470 Reading package lists...
#18 3.171 Reading package lists...
#18 4.928 Building dependency tree...
#18 5.125 Reading state information...
#18 5.163 Package libgl1-mesa-glx is not available, but is referred to by another package.
#18 5.163 This may mean that the package is missing, has been obsoleted, or
#18 5.163 is only available from another source
#18 5.163 
#18 5.167 E: Package 'libgl1-mesa-glx' has no installation candidate
#18 ERROR: process "/bin/sh -c apt-get update && apt-get install -y libgl1-mesa-glx libglib2.0-0 && rm -rf /var/lib/apt/lists/*" did not complete successfully: exit code: 100

#34 [frontend builder 4/4] RUN npm run build
#34 1.125 
#34 1.125 > frontend@0.1.0 build
#34 1.125 > next build
#34 1.125 
#34 2.040    â–² Next.js 16.0.6 (Turbopack)
#34 2.040 
#34 2.073    Creating an optimized production build ...
#34 CANCELED
------
 > [ai-service 4/6] RUN apt-get update && apt-get install -y libgl1-mesa-glx libglib2.0-0 && rm -rf /var/lib/apt/lists/*:
1.796 Get:6 http://deb.debian.org/debian-security trixie-security/main amd64 Packages [80.7 kB]



5.125 Reading state information...
5.163 Package libgl1-mesa-glx is not available, but is referred to by another package.
5.163 This may mean that the package is missing, has been obsoleted, or
5.163 is only available from another source
5.163 
5.167 E: Package 'libgl1-mesa-glx' has no installation candidate
------
Dockerfile:6

--------------------

   4 |     

   5 |     COPY requirements.txt .

   6 | >>> RUN apt-get update && apt-get install -y libgl1-mesa-glx libglib2.0-0 && rm -rf /var/lib/apt/lists/*

   7 |     

   8 |     RUN pip install --no-cache-dir -r requirements.txt

--------------------

target ai-service: failed to solve: process "/bin/sh -c apt-get update && apt-get install -y libgl1-mesa-glx libglib2.0-0 && rm -rf /var/lib/apt/lists/*" did not complete successfully: exit code: 100

